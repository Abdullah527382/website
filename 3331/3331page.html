<!doctype html>
<html lang="en">
  <head>
    <!-- FAVICON: -->
    <link rel="icon" type="image/png" href="../pictures/favicon.png"/>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v4.1.1">
    <title>JS</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/4.5/examples/navbar-fixed/">



    <!-- Bootstrap core CSS -->
    <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  	<link href="../js/prism.css" rel="stylesheet" />

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!-- Bootstrap CSS -->
    <!-- OLD style sheet: (from template)-->
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous"> -->

  
    <!-- ALL bootstrap classes: https://www.w3schools.com/bootstrap/bootstrap_ref_all_classes.asp-->

    <!-- Custom styles for this template -->
     <!-- Custom styles for this template -->
     <link href="navbar-top-fixed.css" rel="stylesheet">
     <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
     <link rel="stylesheet" type="text/css" href="../css/custom.css">
  </head>

  <body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <a class="navbar-brand" href="../index.html">Home</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav mr-auto">
          <!-- Links to our pages-->
          <li class="nav-item">
            <div class="btn-group">
              <a class="nav-link" href="../eloquentJS/learnjs.html"> JavaScript</a>

              <button type="button" class="btn btn-dropdown dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="eloquentJS/learnjs.html">
                <span class="sr-only" >Toggle Dropdown</span>
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="../eloquentJS/learnjs.html#chapter-1-values-types-and-operators">Chapter 1</a>
                <a class="dropdown-item" href="../eloquentJS/learnjs.html#chapter-2-program-structure">Chapter 2</a>
                <a class="dropdown-item" href="../eloquentJS/learnjs.html#chapter-3-functions">Chapter 3</a>
                <a class="dropdown-item" href="../eloquentJS/learnjs.html#chapter-4-objects-and-arrays">Chapter 4</a>
                <a class="dropdown-item" href="../eloquentJS/learnjs.html#chapter-5-higher-order-functions">Chapter 5</a>
                <a class="dropdown-item" href=../eloquentJS/learnjs.html#chapter-6-the-secret-life-of-objects>Chapter 6</a>
                <a class="dropdown-item" href=../eloquentJS/learnjs.html#chapter-7-project-a-robot>Chapter 7</a>
                <a class="dropdown-item" href=../eloquentJS/learnjs.html#chapter-8-bugs-and-errors>Chapter 8</a>

              </div>
            </div>          
          </li>
            <li class="nav-item">
              <a class="nav-link" href="../Algos/Algospage.html">Algos</a>
            </li>
            <li>
              <div class="btn-group">
                <a class="nav-link" href="../2511/2511page.html"> COMP2511</a>
    
                <button type="button" class="btn btn-dropdown dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" href="2511/2511page.html">
                  <span class="sr-only" >Toggle Dropdown</span>
                </button>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href=#>Week 1</a>
                  <a class="dropdown-item" href=#>Week 2</a>
                  <a class="dropdown-item" href=#>Week 3</a>
                  <a class="dropdown-item" href=#>Week 4</a>
                  <a class="dropdown-item" href=#>Week 5</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href=./tutorials/2511tutes.html>Tutorials</a>
                  <a class="dropdown-item" href=./labs/2511labs.html>Labs</a>
                </div>
              </div> 
            </li>
          </li>
          <li>
            <div class="btn-group">
              <a class="nav-link" href="../3311/3311page.html"> COMP3311</a>
    
              <button type="button" class="btn btn-dropdown dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" href="2511/2511page.html">
                <span class="sr-only" >Toggle Dropdown</span>
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item" href=#>Week 1</a>
                <a class="dropdown-item" href=#>Week 2</a>
                <a class="dropdown-item" href=#>Week 3</a>
                <a class="dropdown-item" href=#>Week 4</a>
                <a class="dropdown-item" href=#>Week 5</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href=../3311/tutorials/3311tutes.html>Tutorials</a>
                <a class="dropdown-item" href=../3311/labs/3311labs.html>Labs</a>
              </div>
            </div> 
          </li>
          <li>
            <div class="btn-group">
              <a class="nav-link active" href="../3331/3331page.html"> COMP3331</a>
    
              <button type="button" class="btn btn-dropdown dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" href="3331/3331page.html">
                <span class="sr-only" >Toggle Dropdown</span>
              </button>
              <div class="dropdown-menu">
                <a class="dropdown-item" href=#>Week 1</a>
                <a class="dropdown-item" href=#>Week 2</a>
                <a class="dropdown-item" href=#>Week 3</a>
                <a class="dropdown-item" href=#>Week 4</a>
                <a class="dropdown-item" href=#>Week 5</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href=../3331/tutorials/3331tutes.html>Tutorials</a>
                <a class="dropdown-item" href=../3331/labs/3331labs.html>Labs</a>
              </div>
            </div> 
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../project/project.html">Project</a>
          </li>
    </ul>

  </div>
</nav>
  <!-- TYPOGRAPHY -->
  <div class="container">
    <h1  class="border-bottom">COMP3331 Progress<small>  by Abdullah A </small></h1>
      <p class="lead">
        This web page is dedicated for my own lecture/tutorial notes and
        tutorial exercises. It acts as a <i>Virtual Diary</i> I will keep throughout the term. Labs and assignments 
        will <strong>NOT</strong> be available till the course finishes. 
      </p>
    <!-- Beginning paragraph: -->
    <hr> 
    <h2 class="mume-header" id="course-outline">Course Overview</h2>
    <table class="table">
      <thead>
       <tr>
        <th>
         Week
        </th>
        <th>
         Lecture Dates
        </th>
        <th>
         Lecture Topics
        </th>
        <th>
         Labs
        </th>
        <th>
         Assessment Tasks
        </th>
       </tr>
      </thead>
      <tbody>
       <tr>
        <td>
         1
        </td>
        <td>
         15 &amp; 18 Sep
         <br>
         2020
        </td>
        <td>
         Course Logistics
         <br>
         Introduction:
         <ul>
          <li>
           What is the Internet?
          </li>
          <li>
           Network edge and core
          </li>
          <li>
           Performance of networks
          </li>
         </ul>
         Introduction:
         <ul>
          <li>
           Layering and Encapsulation
          </li>
         </ul>
         <br>
        </td>
        <td>
         Self-Study of Lab
         <br>
         resources and tools
         <br>
         (no submission and no marks)
        </td>
        <td>
        </td>
       </tr>
       <tr>
        <td>
         2
        </td>
        <td>
         22 &amp; 25 Sep
         <br>
         2020
         <br>
        </td>
        <td>
         Application Layer:
         <ul>
          <li>
           Principles of networked applications
          </li>
          <li>
           The Web &amp; HTTP
          </li>
          <li>
           Email
          </li>
          <li>
           Domain Name Service (DNS)
          </li>
          <li>
           Peer-to-Peer Networks and DHT
          </li>
         </ul>
        </td>
        <td>
         Lab 1
        </td>
        <td>
         Lab 1 submission deadline: 11:00 am
         <br>
         Tue 29 Sep 2020
         <br>
         <br>
         <br>
         <br>
         <br>
        </td>
       </tr>
       <tr>
        <td>
         3
        </td>
        <td>
         29 Sep &amp; 02 Oct 2020
        </td>
        <td>
         Application Layer:
         <ul>
          <li>
           Content Distribution Networks
          </li>
          <li>
           Socket Programming
          </li>
         </ul>
         <p>
          Transport Layer:
          <br>
         </p>
         <ul>
          <li>
           Transport services
          </li>
         </ul>
        </td>
        <td>
         Lab 2
        </td>
        <td>
         Lab 2 submission deadline: 11:00 am
         <br>
         Tue 06 Oct 2020
         <br>
         <br>
         <strong>
          Assignment Specs Released (Expected)
         </strong>
         <br>
         <br>
         <br>
         <br>
        </td>
       </tr>
       <tr>
        <td>
         4
        </td>
        <td>
         06 &amp; 09 Oct 2020
        </td>
        <td>
         Transport Layer:
         <ul>
          <li>
           Multiplexing &amp; Demultiplexing
          </li>
          <li>
           UDP
          </li>
          <li>
           Principles of reliable data delivery
          </li>
          <li>
           Pipelined Protocols
          </li>
         </ul>
        </td>
        <td>
         Lab 3
         <br>
        </td>
        <td>
         Lab 3 submission deadline: 11:00 am
         <br>
         Tue 13 Oct 2020
         <br>
         <br>
         <br>
        </td>
       </tr>
       <tr>
        <td>
         5
        </td>
        <td>
         13 &amp; 16 Oct 2020
         <br>
        </td>
        <td>
         Transport Layer:
         <ul>
          <li>
           TCP
          </li>
          <li>
           Connection management &amp; flow control
          </li>
          <li>
           Congestion control
          </li>
          <li>
           Fairness
          </li>
         </ul>
        </td>
        <td>
         Tutorial 1
         <br>
        </td>
        <td>
         <br>
        </td>
       </tr>
       <tr>
        <td>
         6
        </td>
        <td>
         No lecture
        </td>
        <td>
         No lecture
         <br>
        </td>
        <td>
         No Lab
        </td>
        <td>
         No Lab
         <br>
         <br>
         <br>
         <strong>
          <br>
         </strong>
        </td>
       </tr>
       <tr>
        <td>
         7
        </td>
        <td>
         27 &amp; 30 Oct 2020
        </td>
        <td>
         Network Layer, Data Plane:
         <ul>
          <li>
           Overview
          </li>
          <li>
           IP
          </li>
         </ul>
        </td>
        <td>
         Lab 4
         <br>
        </td>
        <td>
         <strong>
          Mid-term Test on 27th October during lecture hours
         </strong>
         <br>
         <br>
         Lab 4 submission deadline: 11:00 am
         <br>
         Tue 03 Nov 2020
         <br>
        </td>
       </tr>
       <tr>
        <td>
         8
         <br>
        </td>
        <td>
         03 &amp; 06 Nov 2020
         <br>
        </td>
        <td>
         Network Layer, Data Plane:
         <ul>
          <li>
           IP Addressing
          </li>
          <li>
           NAT
          </li>
          <li>
           IPv6
          </li>
         </ul>
         <ul>
         </ul>
        </td>
        <td>
         Lab 5
         <br>
        </td>
        <td>
         Lab 5 submission deadline: 11:00am
         <br>
         Tue 10 Nov 2020
         <br>
         <br>
         <br>
        </td>
       </tr>
       <tr>
        <td>
         9
        </td>
        <td>
         10 &amp; 13 Nov 2020
        </td>
        <td>
         Network Layer, Control Plane:
         <ul>
          <li>
           Routing algorithms
          </li>
          <li>
           Link State and Distance Vector
          </li>
          <li>
           Hierarchical routing
          </li>
          <li>
           ICMP
          </li>
         </ul>
         Link Layer:
         <ul>
          <li>
           Error detection
          </li>
         </ul>
        </td>
        <td>
         Lab 6
         <br>
        </td>
        <td>
         Lab 6 submission deadline: 11:00 am
         <br>
         Tue 17 Nov 2020
         <br>
        </td>
       </tr>
       <tr>
        <td>
         10
        </td>
        <td>
         17 &amp; 20 Nov
         <br>
         2020
         <br>
        </td>
        <td>
         Link Layer:
         <ul>
          <li>
           Multiple Access Protocols
          </li>
          <li>
           Link Layer Addressing and ARP
          </li>
          <li>
           Ethernet
          </li>
          <li>
           Switches
          </li>
         </ul>
         Wireless Networks
         <ul>
          <li>
           Wireless characteristics
          </li>
          <li>
           802.11
          </li>
          <li>
           CSMA/CA
          </li>
         </ul>
         A day in the life of a web request
         <br>
         Network Security (self study)
         <ul>
          <li>
           Basic Cryptography
          </li>
          <li>
           Message integrity &amp; Digital signatures
          </li>
          <li>
           Authentication
          </li>
         </ul>
        </td>
        <td>
         Tutorial 2
         <br>
        </td>
        <td>
         <strong>
          Assignment Due
         </strong>
        </td>
       </tr>
       <tr>
        <td>
         Exam Period
        </td>
        <td>
         27 Nov- 10 Dec 2020
         <br>
        </td>
        <td>
         Exam Period
        </td>
        <td>
         <br>
        </td>
        <td>
         <strong>
          Final Exam
         </strong>
        </td>
       </tr>
      </tbody>
     </table>  
    <hr>
  <!-- Begin content -->

</head>
<body for="html-export">
  <div class="mume markdown-preview  ">
  <h2 class="mume-header" id="week-1-introduction">Week 1 - introduction</h2>

<h4 class="mume-header" id="11-what-is-the-internet">1.1 - What is the internet</h4>

<p>An interconnection of different computer networks but also an infrastructure that provides different services to networked applications. Essentially a network of networks, interconnected ISPs (internet service providers).</p>
<p>Lets look at the various components that make the internet (<strong>nuts and bolts view</strong>):<br>
<em>Billions</em> of connected computing devices</p>
<ul>
<li>Hosts = end systems</li>
<li>Running network apps</li>
</ul>
<p>Communication links:</p>
<ul>
<li>Fiber, copper, radio, satellite</li>
<li>These links vary in data transfer rate; <em>bandwidth</em></li>
<li>Transmission rate - <em>bandwidth</em></li>
</ul>
<p>Packet switches (forward packets - chunks of data):</p>
<ul>
<li>Routers and link layer switches (these forward data from source to destination)</li>
</ul>
<p>Some fun examples of internet appliances:</p>
<ul>
<li>Picture frames</li>
<li>Internet fridges</li>
<li>Smart light bulbs</li>
<li>Web-enabled toaster</li>
<li>Web connected cars</li>
</ul>
<p>These applications are part of the <em>&quot;IoT&quot;</em> - Internet Of Things (An <strong>interconnection</strong> of embedded devices within the existing internet infrastructure). In less than 20 years, we have introduced a whole range of different devices (this will all relate to more recent challenges imposed as time progresses).</p>
<p><strong>Protocols</strong> control sending, receiving of messages e.g. TCP, IP, HTTP, Skype, 802.11, etc. (How these messages are sent and received). Each application you use will be using many different protocols</p>
<p><strong>Internet Standards</strong></p>
<ul>
<li>RFC: <em>Request For Comments</em>, all open source protocols have an RFC. This allows you to develop your own web browser, server, etc.</li>
<li>IETF: Internet Engineering Task Force, they are responsible for developing these standards</li>
</ul>
<p><strong>A service view of the internet:</strong><br>
Infrastructure that provides service to applications:</p>
<ul>
<li>Web, VoIP, email, games, e-commerce, social nets, etc.</li>
<li>Basic service: UDP, complex service: TCP</li>
</ul>
<p>Provides programming interface to apps:</p>
<ul>
<li>Hooks that allow sending and receiving app programs to &quot;connect&quot; to the internet</li>
<li>Provides service options, analogous to postal service</li>
</ul>
<p><em>Consider Alice and Bob exchanging information on the internet, they use an API (Application Programming Interface) to send and receive info. Developers just write code for applications that run on the end systems and they don&apos;t need to worry about the inner workings of the internet.</em></p>
<p><strong>Protocols</strong>:<br>
Human protocols:</p>
<ul>
<li>What&apos;s the time?</li>
<li>Hello</li>
<li>I have a question ye?</li>
</ul>
<p>Network protocols:</p>
<ul>
<li>Machines rather than humans</li>
<li>All communication activity in internet governed by protocols.</li>
</ul>
<p><strong>Define protocol:</strong><br>
Shows how a message looks like, i.e. the format. The order of messages sent and received is also important, error control, actions taken on msg transmission and receipt are all defined by protocols.<br>
An example of machine protocol:</p>
<ol>
<li>TCP connection request</li>
<li>TCP connection response</li>
<li>Get <a href="http://www.webpage.com/file">www.webpage.com/file</a></li>
<li>Receive file</li>
</ol>
<p>A joke example - IP over Avian carriers (check it out!) - <a href="https://en.wikipedia.org/wiki/IP_over_Avian_Carriers">https://en.wikipedia.org/wiki/IP_over_Avian_Carriers</a> (packet loss = pigeon death)</p>
<h4 class="mume-header" id="12-network-edge">1.2 - Network edge</h4>

<p><strong>The network edge:</strong></p>
<ul>
<li>These are all the hosts and clients but also the servers running these various apps, they are located mostly in data centers for efficiency.</li>
</ul>
<p><strong>The access network and physical media:</strong></p>
<ul>
<li>Wired, wireless communication links</li>
<li>DSL allows us to use our existing phone lines (e.g. the ones telstra has installed all over Australia) to central office DSLAM</li>
<li>The data over DSL phone line goes to the internet, voice over DSL phone line goes to telephone net</li>
<li>ADSL over POTS --&gt; voice, data transmitted at different frequences over dedicated line to central office.</li>
<li>Different rates for upload (&lt;2.5Mbps) and download (&lt;24Mbps), the further you are from DSLAM, the lower the rate.</li>
</ul>
<p><strong>Cable network:</strong></p>
<ul>
<li>HFC: Hybrid fiber coax - asymmetric up to 30Mbps downstream transmission rate. 2Mbps upstream</li>
<li>Network of cable is shared and thus speed varies on how many people are using the network</li>
</ul>
<p><strong>Fiber to the home:</strong></p>
<ul>
<li>Fully optical fiber path all the way to the home, you can push much more data with optics/light.</li>
<li>Much more cost because new infrastructure e.g. NBN, Google, Verizon</li>
<li>Speed is generally higher 30MBps to 1Gbps</li>
</ul>
<p><strong>Home network:</strong></p>
<ul>
<li>Wireless access points, wired ethernet, touter, firewall, cable, etc.</li>
</ul>
<p><strong>Enterprise access networks: Ethernet</strong></p>
<ul>
<li>typically used in companies and universities, etc.</li>
<li>10Mbps to even 10Gbps transmission rates</li>
<li>Today, end systems typically connect into ethernet switch</li>
</ul>
<p><strong>Wireless access networks:</strong></p>
<ul>
<li>Shared wireless access networks connects end system to router (via base station)</li>
<li>wireless LANs: within buildings, pretty high capability of transmission</li>
<li>wide-area wireless access: 4G, 5G, provided by telco operator, between 10-50Mbps</li>
</ul>
<p><strong>The network core</strong>:</p>
<ul>
<li>Interconnected routers</li>
<li>Network of networks</li>
</ul>
<p><strong>Physical Media</strong><br>
<em>Bit</em>: Propagates between transmitter/receiver pairs<br>
<em>Physical link:</em> What lies between transmitter &amp; receiver<br>
<em>Guided media:</em> Signals which propagate in solid media - copper, fiber and coax<br>
<em>Unguided media:</em> Signals propagate freely - radio</p>
<p><strong>Guided media (in depth):</strong><br>
Twisted pair - Two insulated copper wires</p>
<ul>
<li>Speed of 100Mbps, 1Gbps ethernet to 10Gbps (depending on category)</li>
</ul>
<p>Coaxial cable - Two concentric copper conductors</p>
<ul>
<li>Broadband has multiple channels on cable and HFC</li>
</ul>
<p>Fiber optic cable - Glass fiber carrying light pulses (each pulse = bit).</p>
<ul>
<li>High speed operation 10Gbps-100Gbps transmission rate</li>
<li>Low error rate due to immunity to EM noise and repeaters are spaced far apart.</li>
</ul>
<p><strong>Unguided media (in depth):</strong><br>
Radio - Signal carried in the EM spectrum i.e. no physical wires needed</p>
<ul>
<li>Radio link types:
<ul>
<li>Microwave (45Mbps)</li>
<li>LAN e.g. WiFi (11Mbps - 1Gbps)</li>
<li>Wide area e.g. cellular (4G - 10Mbps)</li>
<li>Satellite (Kbps - 45Mbps), 270msec end-end delay, Geosynchronous vs Low earth-orbiting</li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="13-network-core">1.3 - Network core</h4>

<p>A mesh of interconnected routers and switches, there are two forms of <em>&apos;switched networks&apos;</em></p>
<p><strong>Circuit switching</strong>: (used in the legacy telephone networks e.g. consider wired telephones)</p>
<ul>
<li>End-to-end allocation made between source and destination, there is no sharing (reserved links).</li>
<li><strong>Physical implementation:</strong> FDM vs TDM. FDM: each channel gets a certain frequency. TDM: Each of the users get a small percentage of the capacity</li>
<li><strong>Timing</strong>: There is a delay between connections, circuit doesn&apos;t get established immediately, depends on distance. When the circuit is established, the data rate is established, an endpoint can then start sending info and reaches other endpoint after some time. Once you are done, you tear down the circuit and free resources.</li>
<li>Why not <strong>feasible</strong>?
<ul>
<li>Inefficient: Because the circuits are used exclusively, communication is very &apos;bursty&apos; i.e. viewing a sequence of web pages. Dedicated circuit cannot be shared hence wasteful to dedicate resources and have periods of silence.</li>
<li>Fixed Data rate: This isn&apos;t very useful, computers communicate at diverse rates for e,g, viewing a video vs web browsing.</li>
<li>Maintenance: not scalable, requires per communication sate needs to be maintained</li>
</ul>
</li>
</ul>
<p><strong>Packet switching:</strong> (used in the internet)</p>
<ul>
<li>Data is sent as chunks of formatted bits (packets - consist of a <strong>header</strong> and a <strong>payload</strong>)
<ul>
<li>The <em>header</em> is the first few bytes, it directs the data to the correct destination, it consists of things like the internet address, Age (TTL), checksum (protects header), etc. Think of header as an API</li>
<li>The <em>payload</em> is the actual data being sent</li>
</ul>
</li>
<li>Switches <em>&#x201C;forward&#x201D;</em> packets based on their headers</li>
<li><strong>Timing</strong>: PS also has delays, after it reaches the switch (which decides where the packet is heading - time delay at switch), there is a small delay at the switch, after that, the packet reaches the destination
<ul>
<li>The switch could just start transmitting as soon as it processes the header (cut-through switching), this speeds up the delay</li>
</ul>
</li>
<li>Each packet travels independently</li>
<li>No link resources are reserved in advance (packet switching leverages <strong>statistical multiplexing</strong> - relies on the <em>assumption</em> that not all flows burst at the same time).
<ul>
<li><em>What happens if the burst happens at the same time? Potential overload?</em><br>
We create a <strong>queue/buffer</strong> in the packet switch, it allows us to store some of the packets during <em>transient overload</em>, when no packets are coming, we release the packets. Realistically we can only store a certain amount into the queue, sometimes (low chance) there is overload leading to packet drops.</li>
</ul>
</li>
</ul>
<p><strong>Packet switching vs Circuit switching</strong>:</p>
<ul>
<li>Packet switching:
<ul>
<li>Allows more users to use the network</li>
<li>Great for <em>bursty</em> data (resource sharing and simpler)</li>
<li>Excessive congestion possible (packet delay and loss), as such, protocols are needed for reliable data transfer</li>
<li>Packet-switching is seen as on-demand allocation vs circuit switching: reserved resources</li>
</ul>
</li>
</ul>
<p><strong>The internet structure:</strong><br>
Access ISPs (Internet Service providers) connect end systems to the the internet, they can be residential, company or university ISPs. Access ISPs are therefore interconnected so that any 2 hosts can send packets to each other.</p>
<p><em>How would we connect millions of access ISPs together?</em></p>
<ul>
<li>We cannot connect ISPs to each other because that does not scale (O(N^2) Connections)</li>
<li>Instead we can connect each access ISP to <em>global transit ISPs</em> (there are many of these ISPs as competitors), each of which are interconnected themselves through <strong>IXPs</strong> (Internet exchange points via <em>peering links</em>)
<ul>
<li><em>Region nets</em> also arise to connect access nets to ISPs</li>
<li>Content providers such as Google, Microsoft, etc. may run their own network to bring services to end users</li>
<li>Tier-1 commercial ISPs i.e. Sprint, AT&amp;T, etc. mix with Content provider networks</li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="14-delay-loss-throughput-in-networks">1.4 - Delay, loss, throughput in networks</h4>

<p>Loss and delays occur when packets <em>queue</em> in router buffers</p>
<ul>
<li>Total incoming traffic (packet arrival rate) exceeds output link capacity</li>
<li>When the packet reaches the head of the queue, it needs to be pushed out - transmission delay</li>
</ul>
<p><strong>4 Sources of packet delay</strong></p>
<ul>
<li><strong>d_proc</strong> (nodal processing)
<ul>
<li>Checks for bit errors, then determines output link</li>
</ul>
</li>
<li><strong>d_queue</strong> (queueing delay - variable/unknown)
<ul>
<li>Dependent on congestion level of router</li>
<li>It is the time spent at output link for transmission</li>
<li>More insight:
<ul>
<li>The queues build up (packets get dropped) when the amount of bits arriving is greater than them leaving the router (bandwidth), <em>If interested checkout queue theory</em></li>
<li>Traffic intensity = Incoming Traffic/Outgoing traffic</li>
</ul>
</li>
</ul>
</li>
<li><strong>d_trans</strong> (transmission delay)
<ul>
<li>Depends on length of <strong>packet</strong> - L (in bits) and link bandwidth - R (bps)</li>
<li>d_trans = L/R</li>
</ul>
</li>
<li><strong>d_prop</strong> (Propagation delay - time taken for packet to actually move)
<ul>
<li>Depends on physical length of the <strong>link</strong>, The prop speed in medium 2*10^8m/s</li>
<li>d_prop = d/s</li>
</ul>
</li>
</ul>
<p>Note: The link bandwidth is dependent on media/access-technology (and physics) you are using i.e. ADSL has limitations, same with fibre, wireless, etc. Bluetooth has lower bandwidth than wi-fi</p>
<p><strong>Real internet delays and routes</strong></p>
<ul>
<li><code>Traceroute</code> provides delay measurement from source to router along end-end internet path towards dest
<ul>
<li>3 probe packets are sent to router <code>i</code> on path TOWARDS dest</li>
<li>Router <code>i</code> will return packets to sender</li>
<li>Sender times intervals between transmission and reply</li>
<li>Usage:
<ul>
<li><code>* * *</code> means that either the probe packet is lost or that the dest router has disabled a response (companies sometimes don&apos;t like it when you can trace their network)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Example of <code>traceroute</code> from <code>gaia.cs.umass.edu</code> to <code>www.eurecom.fr</code></p>
<pre data-role="codeBlock" data-info class="language-"><code>1 cs-gw (128.119.240.254) 1 ms 1 ms 2 ms
2 border1-rt-fa5-1-0.gw.umass.edu (128.119.3.145) 1 ms 1 ms 2 ms
3 cht-vbns.gw.umass.edu (128.119.3.130) 6 ms 5 ms 5 ms
4 jn1-at1-0-0-19.wor.vbns.net (204.147.132.129) 16 ms 11 ms 13 ms
5 jn1-so7-0-0-0.wae.vbns.net (204.147.136.136) 21 ms 18 ms 18 ms
6 abilene-vbns.abilene.ucaid.edu (198.32.11.9) 22 ms 18 ms 22 ms
7 nycm-wash.abilene.ucaid.edu (198.32.8.46) 22 ms 22 ms 22 ms 8 62.40.103.253 (62.40.103.253) 104 ms 109 ms 106 ms
9 de2-1.de1.de.geant.net (62.40.96.129) 109 ms 102 ms 104 ms
10 de.fr1.fr.geant.net (62.40.96.50) 113 ms 121 ms 114 ms
11 renater-gw.fr1.fr.geant.net (62.40.103.54) 112 ms 114 ms 112 ms
12 nio-n2.cssi.renater.fr (193.51.206.13) 111 ms 114 ms 116 ms
13 nice.cssi.renater.fr (195.220.98.102) 123 ms 125 ms 124 ms
14 r3t2-nice.cssi.renater.fr (195.220.98.110) 126 ms 126 ms 124 ms
15 eurecom-valbonne.r3t2.ft.net (193.48.50.54) 135 ms 128 ms 133 ms
16 194.214.211.25 (194.214.211.25) 126 ms 128 ms 126 ms
17 * * *
18 * * *
19 fantasia.eurecom.fr (193.55.113.142) 132 ms 128 ms 136 ms
</code></pre><p>End-to-end delay:</p>
<ul>
<li>Sum of all d_nodal along the path where d_nodal = d_proc + d_queue + d_trans + d_props</li>
</ul>
<p><strong>Throughput</strong>:<br>
The rate (bits/s) at which bits transferred between sender and receiver, there are two types of throughput - instantaneous and average. We are more interested in the average throughput.</p>
<ul>
<li>Consider 2 throughputs in an N-N path: Rs (server) and Rc (client) connected by a router, we have to consider 2 cases:
<ul>
<li>Rs &lt; Rc ... The average end-end throughput will be Rs</li>
<li>Rs &gt; Rc ... The average end-end throughput will be Rc, in this case a queue will build up at the midway router, even possible packet loss behavior</li>
</ul>
</li>
<li>This limiting link is known as the bottleneck link</li>
<li>In real world internet scenarios, the bottleneck link is much more complex as it can allow for sharing of connections</li>
</ul>
<h4 class="mume-header" id="15-protocol-layers-service-models">1.5 Protocol layers, service models</h4>

<p><strong>Layering in networking</strong>:<br>
What does it take to send the packet across?<br>
Consider the layers below:</p>
<ol>
<li>Prepare data - <strong>Application</strong>
<ul>
<li>Supporting network applications (FTP, SMTP, HTTP, ...)</li>
</ul>
</li>
<li>Ensure that packets get to the dst process - <strong>Transport</strong>
<ul>
<li>Uses 2 options: TCP, UDP</li>
</ul>
</li>
<li>Deliver packets across the global network - <strong>Network</strong>
<ul>
<li>IP (defines actions of these messages), routing protocols</li>
</ul>
</li>
<li>Delivery packets within local network to next hop - <strong>Link</strong>
<ul>
<li>Ethernet, 802.111 (wifi), PPP</li>
</ul>
</li>
<li>Bits / packets on wire - <strong>Physical</strong>
<ul>
<li>bits &quot;on the wire&quot;</li>
</ul>
</li>
</ol>
<p>Note: Each layer depends on the layer below/supports the layer above and independent of others</p>
<p><strong>Benefits of layering:</strong><br>
Gives us way to create an abstraction, gIves us a middle API, whenever we create a new application, we can take use of that middle API. If we create a new transport medium, we can still use the transport layer.</p>
<ul>
<li>A lot of flexibility, Easily create new applications and protocols</li>
<li>Create new ways to transmit data (All we have to do is create a new link layer)</li>
<li>Prevent technology in one layer from affecting other layers</li>
</ul>
<p><strong>Downsides of layering</strong>:</p>
<ul>
<li>Layer N may duplicate lower level functionality</li>
<li>information hiding may hurt performance e.g. packet loss due to corruption and congestion</li>
<li>Each layer introduces its own header, this then adds extra overheads (increase in header size).
<ul>
<li>E.g. TCP, IP and ethernet headers add up to 54 bytes</li>
</ul>
</li>
<li>Layer violations (when the gains too great to resist)
<ul>
<li>Private networks ... NAT</li>
</ul>
</li>
<li>Layer violations (when network doesn&apos;t trust ends)
<ul>
<li>Firewalls</li>
</ul>
</li>
</ul>
<p><strong>Implementation of layers</strong>:<br>
We need to implement layers across machines such as hosts, routers and switches</p>
<ul>
<li><strong>Hosts</strong> are running the applications, therefore we must place application layer protocol on the host. The hosts must also transmit the actual bits on the wire and hence all layers must exist at host</li>
<li><strong>Routers</strong> take care of the <em>physical layer</em> (transmit bits on the wire), they also deliver packets onto next hop (<em>link layer</em>) and they participate in global delivery (<em>network layer</em>)</li>
</ul>
<h4 class="mume-header" id="16-networks-under-attack-security-optional">1.6 - Networks under attack: security (optional)</h4>

<h4 class="mume-header" id="17-history-optional">1.7 - History (optional)</h4>


  </div>
</body></html>
<hr>
<!-- week02 lecture notes-->
</head>
<body for="html-export">
  <div class="mume markdown-preview  ">
  <h2 class="mume-header" id="week-2-application-layer-principles-web-email">Week 2 - Application Layer (Principles, Web, Email)</h2>

<h4 class="mume-header" id="21-principles-of-network-applications">2.1 - Principles of network applications</h4>

<p>IPC - Interprocess Communication:<br>
When we execute applications, at the basics we have processes that allow this</p>
<ul>
<li>Processes talk to each other through IPC</li>
<li>On a single machine they would use shared memory</li>
<li>On across multiple machines (e.g. global internet), they wold use other abstractions (message passing), i.e. <em>sockets</em>.</li>
</ul>
<p><strong>Sockets</strong>:<br>
Process sends and receives messages to and from its socket, think of it like a <strong>door</strong>; <em>Sending process</em> shoves message out the door, it relies on transport infrastructure on the other side of the door to deliver <em>message</em> to <em>socket</em> (at receiving process)</p>
<ul>
<li>To receive messages, a process must have an <em>identifier</em></li>
<li>Host device has a unique 32 bit <strong>IP address</strong>, this itself cannot be used to identify a process.
<ul>
<li>Rather we have to use a combination of IP address and <strong>port number</strong> to identify a process e.g. HTTP server (80), Mail server (25), etc.</li>
</ul>
</li>
</ul>
<p><strong>Client-Server architecture</strong><br>
Server:</p>
<ul>
<li>Exports well-defined request/response interface</li>
<li>Long-lived process that waits for requests, needs to always be on</li>
<li>Carry out process requested by client</li>
<li>Permanent IP address and static ports e.g. http: 80</li>
<li>Use data centres for scaling</li>
<li>May communicate with other servers</li>
</ul>
<p>Client:</p>
<ul>
<li>Short-lived process that makes requests</li>
<li>Is more of the user side of the app</li>
<li>Dynamic IP address</li>
<li>Do not communicate directly with each other</li>
</ul>
<p><strong>P2P architecture</strong></p>
<ul>
<li>No always-on server</li>
<li>End systems are called peers and they directly communicate with each other, there is no hierarchy between them (symmetric responsibility). e.g. file sharing, bitTorrent, gaming, blockchain, etc. (any distributed system)</li>
</ul>
<p><strong>Pros</strong>:</p>
<ul>
<li>Self scaling networks, each new peer that gets added brings new service capacity as well as new service demands e.g. in file sharing, a person may download but ALSO upload files</li>
<li>Speed from <em>parellelism</em> and less contention</li>
<li>Extremely reliable, e.g. if 1 peer dies, there are plenty of others to connect to (redundancy and fault tolerance)</li>
<li>Geographic distribution e.g. peers all over the world are connected but you&apos;ll get connected to more local peers</li>
</ul>
<p><strong>Cons</strong>:</p>
<ul>
<li>Decentralized control has some problems:
<ul>
<li>Peers may make mutually conflicting decisions e.g. in cryptocurrencies</li>
<li>Uncertainty in state ... No shared memory</li>
</ul>
</li>
<li>Distributed algorithms are complex</li>
</ul>
<p><strong>Application layer protocol</strong><br>
We need to consider the</p>
<ul>
<li>Types of messages exchanged i.e. requests or responses</li>
<li>Message syntax: The format of the messages</li>
<li>Message semantics: When we define the message, we need ot define the fields as well</li>
<li>Rules for when and how processes send/respond to messages</li>
</ul>
<p>Once we have defined our protocol we need to consider:</p>
<p>If we want to <strong>open source</strong> our protocol or keep it proprietary, choosing the former would allow it to be defined in RFCs</p>
<ul>
<li>Benefits in open source: Anyone can create their own implementation (Client &amp; server in C-S architecture and Peer in P2P architecture) e.g. HTTP, SMTP --&gt; We can design our own browser with HTTP, email for SMTP</li>
<li>Skype is an example of a proprietary, we can&apos;t design our own Skype client, similar with Slack, etc.</li>
</ul>
<p>We should also consider what transport service an app needs:<br>
<strong>Data integrity:</strong></p>
<ul>
<li>Some apps e.g. web transactions, file transfer requires 100% reliable data transfer</li>
<li>Other apps such as audio, video can tolerate some loss</li>
</ul>
<p><strong>Timing:</strong></p>
<ul>
<li>Some apps e.g. Interactive online games require low delay to be</li>
</ul>
<p><strong>Throughput:</strong></p>
<ul>
<li>Some apps require min amount of throughput to be effective e.g. video stream, dial up</li>
<li>Other apps make use of whatever throughput they get (elastic apps e.g. Email)</li>
</ul>
<p><strong>Security:</strong></p>
<ul>
<li>Encryption, data integrity, etc.</li>
</ul>
<p><strong>Internet transport protocols services</strong><br>
TCP service:</p>
<ul>
<li>reliable transport between sending and receiving process</li>
<li>flow control: sender won&#x2019;t overwhelm receiver</li>
<li>congestion control: throttle sender when network overloaded</li>
<li>does not provide: timing, minimum throughput guarantee, security</li>
<li>connection-oriented: setup required between client and server processes</li>
</ul>
<p>UDP service:</p>
<ul>
<li>unreliable data transfer between sending and receiving process</li>
<li>does not provide: reliability, flow control, congestion control, timing, throughput guarantee, security, or connection setup</li>
</ul>
<p><strong>Why use UDP?</strong><br>
The simplicity of UDP might be favorable for some applications rather than going through the whole process of setting up TCP connections</p>
<h4 class="mume-header" id="22-web-and-http">2.2 Web and HTTP</h4>

<p>WWW - a distributed database of &quot;pages&quot; linked through hypertext transport protocol.<br>
Time Berners-lee at CERN first implemented HTTP - 1990.</p>
<ul>
<li>Web page consists of objects</li>
<li>Object can be HTML file, JPEG image, etc.</li>
<li>Web page consists of a base HTML-file which includes several referenced objects.</li>
<li>Each object is addressable by a URL (uniform Resource Locator) consisting of a host name and a path:</li>
</ul>
<p>protocol://host-name[: port]/path</p>
<ul>
<li>Protocol: http, ftp, https, smtp, etc.</li>
<li>Hostname: DNS name, IP address</li>
<li>Port (http: 80, https: 443), we don&apos;t need to specify this because 80 and 443 is set as default</li>
</ul>
<p>HTTP: hypertext transfer protocol:</p>
<ul>
<li>Web&apos;s app layer protocol</li>
<li>Client/server model -&gt; client: browser that requests, receives and displays web objects. Server: Web server sends objects in response to requests</li>
<li>Uses TCP because of the inbuilt reliability (List the method...)</li>
<li>HTTP is stateless and the server doesn&apos;t maintain and previous client information (cookies allows for a state)</li>
<li>There are 2 types of HTTP messages: requests (ASCII - human readable), responses</li>
<li>(...)</li>
<li>The HTTP response message consists of the status line (protocol status code, status phrase), header lines and data</li>
<li>HTTP is all text:
<ul>
<li>This makes the protocol simple (human readable, variable length data, no encoding issues, \r\n,..)</li>
<li>Not the most efficient as: many protocols use binary fields, headers may come in any order and requires string parsing</li>
<li>Non text content needs encoding</li>
</ul>
</li>
<li>Request content types: GET, POST, HEAD, PUT, DELETE,...</li>
</ul>
<p><em>Why do we need to include Host name in requests when the server has already set up connection?</em></p>
<p>Different URLs could be hosted on the same server</p>
<p><strong>User-server State: cookies</strong></p>
<p>Many websites use cookies, consider the 4 components:</p>
<ol>
<li>Cookie header line of HTTP response message</li>
<li>Cookie header line in next HTTP request message</li>
<li>Cookie file kept on user&apos;s host, managed by user&apos;s browser</li>
<li>Back-end database at website</li>
</ol>
<p>Bad side of cookies:</p>
<ul>
<li>Cookies permit sites to learn a lot of you</li>
<li>You may supply name and email to sites</li>
</ul>
<p><strong>Performance of HTTP</strong>:</p>
<ul>
<li>Page load time (PLT ) as the metric (from click until user sees page), this is the key measure of web performance</li>
<li>Depends on many factors such as page content/struct, protocols involved, net bandwidth and RTT</li>
</ul>
<p>User goals and solutions:</p>
<p>Users would want fast downloads (Improve HTTP) and high availability and as such content providers (cache/replicate the content into web caches helping users to access it faster) into want happy users and a cost effective infrastructure (web hosting, CDNs, datacentres).</p>
<p>We can improve PLT by:</p>
<ul>
<li>Reducing content size for transfer</li>
<li>Changing HTTP (better use of bandwidth, avoid repeated transfers of same content)</li>
<li>Move content closer to client</li>
</ul>
<p><strong>Non-Persistent HTTP (1.0): response time</strong><br>
RTT: Time for a small packet to travel from client to server and back</p>
<p>The non-persistent HTTP <em>response time</em> is equal to 2*RTT (one RTT to establish the TCP connection and one RTT to request and receive an object) + file transmission time (time to transmit file - quite small)</p>
<p>Non-Persistent connections have some flaws:</p>
<ul>
<li>Each TCP connection is closed after the server sends the object (i.e. connection doesn&apos;t persist) thus a brand new connection must be established for each of these connections. This places a significant burden on web servers (which are already handling hundreds of different clients simultaneously)</li>
<li>As already mentioned, each object suffers a delay of 2*RTT + file-process-time</li>
</ul>
<p>Concurrent requests and responses:<br>
These use multiple connections in <em>parallel</em> (no ordering of responses)</p>
<p>The use of parallel connections shortens the response time.</p>
<p>Disadvantages:</p>
<ul>
<li>Each transaction opens/closes a new connection, costing time and bandwidth.</li>
<li>Each new connection has reduced performance because of TCP slow start.</li>
<li>There is a practical limit on the number of open parallel connections</li>
</ul>
<p><strong>Persistent HTTP (1.1 - with pipelining)</strong></p>
<ul>
<li>Server leaves TCP connection open after sending response</li>
<li>Subsequent HTTP messages between same client/server are sent over the same TCP connection</li>
</ul>
<p><em>With pipelining:</em> The client issues new request when previous response has been received, 1 RTT for each referenced object</p>
<p><em>Without pipelining:</em> Client sends requests as soon as it encounters a referenced object (as less as 1 RTT for all ref. objects)</p>
<p>We can improve PLT in this case by changing HTTP to avoid repeated transfers of same content, use caching and web-proxies</p>
<p><strong>Web Caching:</strong><br>
Caching definition - store data in cache memory, something that sits in the middle between the client and the server:</p>
<p>A web cache is also called a proxy server --&gt; a network entity which satisfies HTTP requests on the behalf of an origin web server. It has its own disk storage and it keeps copies of recently requested objects within that storage</p>
<p><strong>Caching example</strong><br>
Suppose a browser is requesting the object <a href="http://www.someschool.edu/campus.gif">http://www.someschool.edu/campus.gif</a>, this is what happens:</p>
<ol>
<li>TCP connection established by the browser to the web cache and sends a HTTP request for the object to the cache</li>
<li>Web cache sees if it has copy of the object stored locally.</li>
</ol>
<ul>
<li>If it does: then the web cache returns the object within an HTTP response message to the client.</li>
<li>Else:
<ul>
<li>The web cache opens a TCP connection to the origin server (<a href="http://www.someschool.edu">www.someschool.edu</a>) and sends a HTTP request for the object, after the server receives the request, it sends the object within an HTTP response to the web cache.</li>
<li>The web cache receives the object, it then stores the copy to its local storage and sends a copy to the client over the TCP connection.</li>
</ul>
</li>
</ul>
<p>Benefits of using a web-cache:</p>
<ul>
<li>Web cache can substantially reduce the response time for a client request, consider the bottleneck bandwidths between client and origin and that of the cache.</li>
<li>Web caches can substantially reduce traffic on an institution&#x2019;s access link to the Internet. This saves cost as the institution would not need to upgrade bandwidth</li>
</ul>
<p><strong>Conditional GET:</strong><br>
Solves a problem that caches impose: An object residing in the cache may be stale i.e. the object houses in the web server may have been updated since the copy was cached at the client.</p>
<p>HTTP has a mechanism that allows cache to verify that its objects are up to date -&gt; Called the &quot;conditional GET&quot; (HTTP request method which uses the GET method and the request messages includes an <em>If-Modified-Since: header line.</em>)</p>
<p>An example:</p>
<pre data-role="codeBlock" data-info class="language-"><code>1) Proxy cache sends a request message to a Web server:

GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.com

2)  Web server sends a response message with the requested object to the cache

HTTP/1.1 200 OK
Date: Sat, 3 Oct 2015 15:39:29
Server: Apache/1.3.0 (Unix)
Last-Modified: Wed, 9 Sep 2015 09:23:24
Content-Type: image/gif
(data data data data data ...)

3) A week later, the same object is requested via cache (it may have now been modified in the past week, the cache performs an &apos;up-to-date check&apos;)

GET /fruit/kiwi.gif HTTP/1.1
Host: www.exotiquecuisine.com
If-modified-since: Wed, 9 Sep 2015 09:23:24

4)  Web server sends a response message to the cache:

HTTP/1.1 304 Not Modified
Date: Sat, 10 Oct 2015 15:39:29
Server: Apache/1.3.0 (Unix)
(empty entity body)

</code></pre><p><strong>Improving HTTP performance via Replication:</strong><br>
Instead of storing data in a single webserver, we can replicate popular websites across many machines</p>
<ul>
<li>Content becomes closer to clients</li>
<li>Spreads loads on servers</li>
</ul>
<p>Imposes issues:</p>
<ul>
<li>When we want to direct client to particular replica</li>
<li>Expensive</li>
</ul>
<p>We solve this via:</p>
<ul>
<li>Using DNS (returns different addresses based on client&apos;s geo location, server load, ...)</li>
<li>Using CDNs (geographically distributed group of servers which work together to provide fast delivery of Internet content).
<ul>
<li>Helps cache content at the network edge (reduce hosting bandwidth)</li>
<li>For more info: <a href="https://www.cloudflare.com/learning/cdn/what-is-a-cdn/">https://www.cloudflare.com/learning/cdn/what-is-a-cdn/</a></li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="23-electronic-mail-smtp-pop3-imap">2.3 - Electronic mail (SMTP, POP3, IMAP)</h4>

<p>E-mail is an <em>asynchronous</em> communication medium&#x2014;people send and read<br>
messages when it is convenient for them,</p>
<p>There are 3 major components of the internet mail system, which are:</p>
<ul>
<li>User agents:
<ul>
<li>Allow users to read, reply to, forward, save, and compose<br>
messages, examples would be Gmail, Apple mail, outlook, ...</li>
</ul>
</li>
<li>Mail servers:</li>
<li>Simple Mail Transfer Protocol (SMTP).</li>
</ul>
<p><strong>Mail Servers</strong><br>
Form the <strong>core</strong> of the e-mail infrastructure. A user&apos;s <em>mailbox</em> resides in one of the mail servers, when a user wants to access the messages, the mail server (containing there messages) <em>authenticates</em> the user.</p>
<p>Users must deal with failures in other user&apos;s mail servers, if there server cannot receive mail, the sender&apos;s server will hold the message in a queue and attempt to transfer later.</p>
<p>After some time, if there is no success, the server removes the message and notifies the sender.</p>
<p><strong>SMTP</strong></p>
<p>SMTP is the principal application-layer protocol for Internet electronic mail. It uses the reliable data transfer service of TCP to transfer mail from the sender&#x2019;s mail server to the recipient&#x2019;s mail server.</p>
<p>Just like other App-layer protocols, SMTP has client and server sides which execute on sender&apos;s and recipient&apos;s mail servers respectively.</p>
<p>SMTP transfer messages from sender&apos;s mail server to recipients&apos; mail server, though it has many wonderful qualities, it also has some archaic characteristics:</p>
<ul>
<li>The body of all mail messages are restricted to simple 7-bit ASCII, this is a pain in today&apos;s age of multimedia (requiring binary multimedia to be encoded before sending over SMTP, then decoded)</li>
</ul>
<p>Notes:</p>
<ul>
<li>There is no intermediate mail servers for sending mail even if the 2 mail servers are located at opposite ends of the world.</li>
</ul>
<p>Consider an example - SMTP client (C) and an SMTP server (S) :</p>
<pre data-role="codeBlock" data-info class="language-"><code>S: 220 hamburger.edu
C: HELO crepes.fr
S: 250 Hello crepes.fr, pleased to meet you
C: MAIL FROM: &lt;alice@crepes.fr&gt;
S: 250 alice@crepes.fr ... Sender ok
C: RCPT TO: &lt;bob@hamburger.edu&gt;
S: 250 bob@hamburger.edu ... Recipient ok
C: DATA
S: 354 Enter mail, end with &#x201D;.&#x201D; on a line by itself
C: Do you like ketchup?
C: How about pickles?
C: .
S: 250 Message accepted for delivery
C: QUIT
S: 221 hamburger.edu closing connection
</code></pre><p><em>Analysis</em>:</p>
<ul>
<li>The mail servers are <a href="http://crepes.fr">crepes.fr</a>, <a href="http://hamburger.edu">hamburger.edu</a></li>
<li>The client issued 5 commands: HELO, MAIL FROM , RCPT TO , DATA ,<br>
and QUIT</li>
<li>The single period meant end of message</li>
<li>The server&apos;s replies to each command have some reply code</li>
<li>SMTP Uses persistent connections, (send multiple messages over same TCP connection)</li>
</ul>
<p>Comparison with HTTP:</p>
<p>Similarities:</p>
<ul>
<li>Both protocols are used to transfer files from 1 host to another</li>
<li>Both use persistent HTTP, SMTP use persistent connections</li>
</ul>
<p>Differences:</p>
<ul>
<li>HTTP is a <em>Pull protocol</em> - a user loads a web page, HTTP is then used to &apos;pull&apos; the information from the server. TCP connection is initiated by the machine which receives the file WHEREAS SMTP is a <em>Push protocol</em> - the sending mail server pushes the file to the receiving mail server. TCP connection is initiated by the machine which sends the file</li>
<li>SMTP requires a message to be in 7-bit ASCII format, otherwise it is encoded into 7-bit ASCII. HTTP Does not impose this restriction.</li>
<li>SMTP places all of the message&apos;s objects into 1 message whereas HTTP encapsulates each object in its own HTTP response message.</li>
</ul>
<p>Note: Use <code>telnet serverName 25</code> for experimenting</p>
<p><strong>Mail Access Protocols</strong></p>
<p>Since a mail server manages mailboxes and runs the client/server sides of SMTP, then if a user&apos;s mail server were to reside locally on his/her PC, then their PC would have to be always on. This is impractical, instead a user runs a <em>User Agent</em> on a local PC but accesses its mailbox stored on an &apos;always-on&apos; shared mail server, typically maintained by the user&apos;s ISP.</p>
<p>The <strong>2 step procedure</strong> is required since a sender&apos;s user agent does not dialogue directly with the recipient&apos;s mail server, and if it did, there would be potential recourse to an unreachable destination.</p>
<ul>
<li>Consider Alice and Bob, Alice&#x2019;s user agent uses SMTP to push the e-mail message into her mail server, then Alice&#x2019;s mail server uses SMTP (as an SMTP client) to relay the e-mail message to Bob&#x2019;s mail server</li>
</ul>
<p>But how do we obtain mail from our mail server to the user agent IF SMTP is a push protocol?</p>
<ul>
<li>By introducing special mail access protocol (IMAP, POP3, etc.) that transfers messages from a user&apos;s mail server to their local PC</li>
</ul>
<h4 class="mume-header" id="24-dns">2.4 - DNS</h4>

<p>Hostnames, an identifier for a host &#x2014; such as <a href="http://www.facebook.com">www.facebook.com</a>, <a href="http://www.google.com">www.google.com</a>.</p>
<p>Because hostnames can consist of<br>
variable-length alphanumeric characters, they would be difficult to process by routers. For these reasons, hosts are also identified by so-called IP addresses e.g. 121.7.106.83.</p>
<p>People prefer the mnemonic hostnames while routers prefer the fixed-length hierarchical structured IP addresses</p>
<p>We need a directory service that reconciles these preferences, translating hostnames to IP addresses. This is the main task of the Domain Name Server (DNS)</p>
<p><strong>Domain Name Server</strong></p>
<p>The DNS is (1) A distributed database implemented in a hierarchy of DNS servers and (2) Application layer protocol which allows hosts to query the distributed database, this protocol runs over UDP and uses port 53</p>
<p>Commonly employed by other protocols including HTP, SMTP to translate user-supplied hostnames to IP addresses.</p>
<p>Consider what happens when a browser - HTTP Client running on some user&apos;s host, requests the URL.</p>
<p>In order for the user&apos;s host to be able to send an HTTP request to the web server, the user&apos;s host must first obtain the IP address of the hostname.</p>
<p>Example:</p>
<ol>
<li>The same user machine runs the client side of the DNS application.</li>
<li>The browser extracts the hostname, <a href="http://www.someschool.edu">www.someschool.edu</a> , from the URL and passes the hostname to the client side of the DNS application.</li>
<li>The DNS client sends a query containing the hostname to a DNS server.</li>
<li>The DNS client eventually receives a reply, which includes the IP address for the hostname.</li>
<li>Once the browser receives the IP address from DNS, it can initiate a TCP connection to the HTTP server process located at port 80 at that IP address.</li>
</ol>
<p>From this example, we see that DNS adds a delay, fortunately, as we discuss below, the desired IP address is often cached in a <strong>nearby</strong> DNS server (reduces network traffic and avg DNS delay)</p>
<p><strong>DNS services and structure</strong></p>
<p>DNS provides a few other important services in addition to translating hostnames to IP addresses:</p>
<p>Host aliasing:</p>
<ul>
<li>A host can have one or more alias names, the original hostname is then referred to as the canonical hostname. DNS can be invoked to obtain canonical hostname as well as IP address for a supplied alias.</li>
</ul>
<p>Mail server aliasing:</p>
<ul>
<li>Hostnames of mail servers can be more complicated than seen in email addresses. DNS can be invoked by a mail application to obtain canonical hostname and IP address. A company&apos;s mail server and web server can have identical aliased hostnames.</li>
</ul>
<p>Load distribution:</p>
<ul>
<li>Among replicated servers e.g. replicated web servers, DNS is used to perform load distribution. Some sites are replicated over multiple servers each with their own IP address (a set of IP addresses for a canonical hostname). When a client makes a DNS query for a name mapped to a set of addresses, the server responds with a rotated set.
<ul>
<li>An application of this rotation is: Multiple mail serves can have the same alias name.</li>
</ul>
</li>
</ul>
<p>why not centralize DNS?</p>
<ul>
<li>single point of failure</li>
<li>traffic volume</li>
<li>distant centralized database</li>
<li>maintenance</li>
</ul>
<p>It just doesn&apos;t scale, it is indeed a distributed, hierarchial database.</p>
<p><strong>Hierarchy</strong></p>
<p>DNS uses a large number of servers, organized in a hierarchial fashion, distributed globally. There are 3 <strong>classes</strong> of DNS servers - root, top-level domain (TLD) and authoritative.</p>
<p><strong>DNS Root servers &amp; diagram</strong><br>
Over 400 root name servers all over the world, managed by 13 different organizations. Root name servers provide IP addresses of the TLD servers.</p>
<p><strong>TLD, authoritative servers</strong><br>
TLD:</p>
<ul>
<li>For each of the top-level domains such as com, org, net, etc. and all of the country top-level domains e.g. UK, FR, CA, etc. there is a TLD server</li>
</ul>
<p>Authoritative:</p>
<ul>
<li>Every organization with publicly accessible hosts must provide publicly accessible DNS Records that map names of those hosts to IP addresses (housed in the organization&apos;s authoritative DNS server or ISP).</li>
</ul>
<p><strong>Local DNS name Server</strong></p>
<p>Does not belong to a hierarchy. Each ISP has a local DNS server, when a host connects, the ISP provides them with addresses of 1 or more of its local DNS servers. A local DNS server is typically &apos;close&apos; to the host</p>
<p>When a host makes DNS query, the query is sent to its local DNS server</p>
<p>DNS name resolution (Iterated vs Recursive):<br>
<em>Iterated</em>: The contacted server replies with name of server to contact<br>
<em>Recursive</em>: The contacted server doesn&apos;t return with a name of a server to contact, rather it contacts the server itself.</p>
<p>Both recurse/iterate till they find name of authoritative name server.</p>
<p><strong>DNS: Caching and Updating</strong><br>
The idea behind DNS caching:<br>
In a query chain (as discussed above), when a DNS server receives a DNS reply (e.g. containing a mapping from a hostname to an IP address), it can &quot;cache&quot; the mapping it its local memory.</p>
<p>These cache entries <em>disappear</em> (timeout) after some time (TTL). TLD servers are typically cached in local name servers (as a result, root servers aren&apos;t visited often).</p>
<p>These entries also may be out-of-date e.g. when host changes IP address, the TTLs will have to expire for internet to recognize new IP address</p>
<p><strong>DNS records X</strong></p>
<p>RR format: (name, value, type, ttl)<br>
Types<br>
A:</p>
<ul>
<li>Name is hostname</li>
<li>Value is IP address</li>
</ul>
<p>NS:</p>
<ul>
<li>Name is domain</li>
<li>Value is hostname of authoritative name server for the domain</li>
</ul>
<p>CNAME:</p>
<ul>
<li>Name is alias name for canonical name</li>
<li>Value is canonical name</li>
</ul>
<p>MX:</p>
<ul>
<li>Value is name of MAILSERVER</li>
</ul>
<p><strong>Messages</strong><br>
The first 12 bytes is the header section.</p>
<p>Query and reply messages both with the same message format<br>
ID is a 16 bit number for a query, a reply to a query uses the same number</p>
<p>Flags:</p>
<ul>
<li>A 1-bit query/reply flag is used to tell whether the message is a query (0) or a reply (1)</li>
<li>A 1-bit authoritative flag is set in a reply message when a DNS server is an authoritative server for a queried name</li>
<li>A 1-bit recursion-desired flag is set when a client desires that the DNS server perform recursion (when it doesn&apos;t have the record).</li>
<li>A 1-bit recursion-available flag is set in a reply when a DNS server supports recursion.</li>
</ul>
<p>There are 4 types of data sections which follow the header:</p>
<ul>
<li>Question section - contains info about the query including <strong>name</strong> being queried and a <strong>type</strong> field e.g. A, MX, etc.</li>
<li>Reply from a DNS server - contains resource records (RRs) for a name originally queried (name, value, type, ttl), a reply can return multiple RRs because a hostname can have multiple IPs</li>
<li>The authority section contains - records of other authoritative servers.</li>
<li>Additional section - contains other helpful records</li>
</ul>
<p>Note: Use dig HOST_NAME</p>
<p><strong>Insertion of records</strong></p>
<ol>
<li>We register the domain name at a registrar (Commercial entity which verifies uniqueness of a domain name and enters it into a DNS database)</li>
<li>Provide names, IP addresses of our primary, secondary authoritative DNS servers. The registrar makes sure that a type NS and A record is entered into the appropriate TLD servers</li>
</ol>
<p>We have to make sure that a type A RR for the webserver domain name and type MX RR for the mail server are entered.</p>
<p><strong>Updating DNS records</strong><br>
Note: Remember that old records may be cached in other<br>
DNS servers (for up to TTL).</p>
<p>More recently, an UPDATE option has been added to the DNS protocol to allow data to be dynamically added or deleted from the database via DNS<br>
messages</p>
<p><strong>Reverse DNS</strong></p>
<p>We consider IP address first, then the domain name. A special record type (PTR) is sed to store the reverse DNS entries. This is used in:</p>
<ul>
<li>Troubleshooting tools such as <code>traceroute</code> or <code>ping</code></li>
<li>SMTP servers for validating IP addresses</li>
<li>Tracking users, etc.</li>
</ul>
<p><strong>Attacking DNS</strong></p>
<p>DDoS attacks</p>
<ul>
<li>Bombard root servers with traffic</li>
<li>traffic filtering</li>
</ul>
<p>Redirect attacks</p>
<ul>
<li>DNS poisoning: Send bogus replies to DNS server, which caches</li>
</ul>
<p>Exploit DNS for DDoS</p>
<ul>
<li>Send queries with spoofed source address: target IP</li>
</ul>
<p>Cache poisoning:</p>
<ul>
<li>Do not allow DNS servers to cache IP address mappings unless they are from authoritative name servers</li>
</ul>
<h4 class="mume-header" id="25-p2p-applications">2.5 P2P applications</h4>

<p><strong>Architecture</strong></p>
<ul>
<li>No always on server</li>
<li>End systems communicate directly</li>
<li>Peers are intermittently connected to each other</li>
<li>Some examples include file distribution e.g. BitTorrent, Streaming (KanKan), Cryptocurrency (bitcoin)</li>
</ul>
<p><strong>File distribution times</strong></p>
<p><em>Consider distributing a file of size F from one server to N peers in both client-server and P2P architectures.</em></p>
<p>Both the P2P and Client-server architecture has each client download a file copy, for client the server must upload N files (a file to N peers) whereas in P2P, the server must upload AT LEAST 1 copy.</p>
<p>The total upload capacity of the system as a whole is equal to the upload rate of the server + upload rates of each peer.</p>
<p>As a result, client-server has distribution time increase <strong>linearly</strong> and without bound as N peers increase, whereas in the P2P architecture, it is always less than some bound (F/u) but also less then client-server.</p>
<p><strong>An example - Bit Torrent</strong></p>
<p>P2P file distribution protocol where a file is divided into 256KB chunks and peers in the torrent send/receive these chunks.</p>
<p><em>Tracker</em> - Tracks peer in participating torrent<br>
<em>Torrent</em> - Group of peers exchanging chunks of a file, .torrent files contain address of trackers for the file AND a list of file chunks (and their cryptographic hashes).</p>
<p><em>Requesting Chunks</em>:</p>
<ul>
<li>At any give time, different peers have different subsets of file chunks. Peers request chunks from other peers in rarest first order</li>
</ul>
<p><em>Sending Chunks</em>:</p>
<ul>
<li>A peer p sends chunks to 4 other peers that send chunks to p at the highest rate. Every 30 seconds, another peer is randomly selected to send chunks (optimistically unchoking).</li>
</ul>
<p><strong>DHT - Getting rid of server/tracker</strong><br>
A DHT is a distributed P2P database which has (key, value) pairs representing tracker info. Removes the reliance of a centralized tracker.</p>
<p>Peers can query and insert the pairs into a DHT. Keys are also assigned to peers (with closest ID)</p>
<h4 class="mume-header" id="26-video-streaming-and-cdns">2.6 Video streaming and CDNs</h4>

<p><strong>Video</strong>:<br>
A sequence of images displayed at constant rate, each image is represented by an array of pixel values.</p>
<p>Spatial coding: Send colour value and the number of repeated values - N<br>
Temporal coding: Send differences from previous frame instead of complete frame</p>
<p>CBR (Constant bit rate) is the fixed video encoding rate. VBR (Variable bit rate) is determined by video encoding rate changes as an amount of <em>spatial</em> (Within image) and <em>temporal</em> (between images) coding changes</p>
<p><strong>DASH</strong>:<br>
Dynamic, Adaptive Streaming over HTTP (DASH) is a method to stream multimedia from a server to a client.</p>
<p>Server:</p>
<ul>
<li>Divides video file into multiple chunks, each is stored and encoded at different rates</li>
<li>The <em>Manifest file</em> provides URLs for different chunks</li>
</ul>
<p>Client:</p>
<ul>
<li>Periodically measures server-to-client bandwidth</li>
<li>Consults the manifest file and requests 1 chunk ata time based on current bandwidth</li>
<li>Responsible for choosing <em>when</em> to request the chunk, <em>what</em> encoding rate to request and <em>where</em> to request the chunk</li>
</ul>
<p><strong>Content Distribution Networks (CDNs)</strong></p>
<p>Used to stream content to hundreds of thousands of simultaneous users, CDNs are used to store the copies of multimedia at various geographical locations.</p>
<p>Q: The role of a CDN provider&apos;s authoritative DNS name server in a CDN is:</p>
<ul>
<li>To map the query for each CDN object to the CDN server closest to the requestor</li>
</ul>
<h4 class="mume-header" id="27-socket-programming-with-udp-and-tcp">2.7 Socket programming with UDP and TCP</h4>

<p><strong>Socket programming/with UDP</strong></p>
<ul>
<li>There is no connection between client and server, the client attaches the IP dest address and port number to each packet, the server extracts the client&apos;s IP address and port number from received packet.</li>
<li>In UDP, transmitted data may be lost of received in incorrect order</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># Client pseudocode</span>
socket <span class="token operator">=</span> createSocket<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
send<span class="token punctuation">(</span>data<span class="token punctuation">,</span> SERVER_PORT_NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>
response <span class="token operator">=</span> receive<span class="token punctuation">(</span>SERVER_PORT_NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># Server pseudocode</span>
socket <span class="token operator">=</span> createSocket<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span>bind<span class="token punctuation">(</span>SERVER_PORT_NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
request <span class="token operator">=</span> receive<span class="token punctuation">(</span>CLIENT<span class="token punctuation">,</span> SERVER_PORT_NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>
data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
send<span class="token punctuation">(</span>CLIENT<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p><strong>Socket programming/with TCP</strong></p>
<ul>
<li>In TCP, the client must contact a server that is already running and waiting for a connection.</li>
<li>The client contacts the server by creating a TCP socket, specifying the IP address and port number of the server process.</li>
</ul>
<pre data-role="codeBlock" data-info="python" class="language-python"><span class="token comment"># Client pseudocode</span>
socket <span class="token operator">=</span> createSocket<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>SERVER_IP<span class="token punctuation">,</span> SERVER_PORT_NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>

data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
socket<span class="token punctuation">.</span>send<span class="token punctuation">(</span>data<span class="token punctuation">,</span> SERVER_PORT_NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>
response <span class="token operator">=</span> socket<span class="token punctuation">.</span>receive<span class="token punctuation">(</span>SERVER_PORT_NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># Server pseudocode</span>
socket <span class="token operator">=</span> createSocket<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span>bind<span class="token punctuation">(</span>SERVER_PORT_NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span>
os<span class="token punctuation">.</span>register<span class="token punctuation">(</span>socket<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
connectionSocket <span class="token operator">=</span> socket<span class="token punctuation">.</span>acceptConnection<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

request <span class="token operator">=</span> socket<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
socket<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>

connectionSocket<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

socket<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p><strong>Sources</strong>:</p>
<ul>
<li>Kurose Computer Networking Textbook pages <strong>112 -&gt; 207</strong></li>
<li><a href="https://lukakerr.github.io/uni/3331-notes">https://lukakerr.github.io/uni/3331-notes</a></li>
<li><a href="https://webcms3.cse.unsw.edu.au/COMP3331/20T3/resources/52098">https://webcms3.cse.unsw.edu.au/COMP3331/20T3/resources/52098</a></li>
<li><a href="https://webcms3.cse.unsw.edu.au/COMP3331/20T3/resources/52146">https://webcms3.cse.unsw.edu.au/COMP3331/20T3/resources/52146</a></li>
<li></li>
</ul>

  </div>
</body></html>
<hr>
<!-- week03 lecture notes-->
</head>
<body for="html-export">
  <div class="mume markdown-preview  ">
  <h2 class="mume-header" id="week-4-transport-layer">Week 4 - Transport Layer</h2>

<h4 class="mume-header" id="31-transport-services">3.1 - Transport services</h4>

<p>Provide logical communication between app processes running on different hosts</p>
<p>Transport protocols run in end systems where:</p>
<ul>
<li>The <em>Sender side</em> breaks the app messages into <em>segments</em>, then passed to the network layer</li>
<li>The <em>receiver side</em> reassembles the segments into messages, then passed to the application layer</li>
</ul>
<h4 class="mume-header" id="32-multiplexing-and-de-multiplexing">3.2 - Multiplexing and De-multiplexing</h4>

<p>Multiplexing at sender:</p>
<ul>
<li>Handle data from multiple sockets</li>
<li>Adds transport header</li>
</ul>
<p>Receiver demultiplexing:</p>
<ul>
<li>Uses the header info to deliver received segments to correct socket</li>
</ul>
<p><strong>Connectionless demultiplexing</strong></p>
<p>When the host receives a UDP segment, it checks dest port number and directs the segments to the socket with that port number</p>
<p>This also applies to IP datagrams with different <strong>source</strong> IP addresses/port numbers, they too will be directed to the same socket (via same dest port number).</p>
<p><strong>Connection-oriented demultiplexing</strong></p>
<p>A TCP socket is identified by a 4-tuple: <code>(sourceIP, sourcePort, destIP, destPort)</code>. All 4 values are used to direct segments to the correct sockets.</p>
<p>A server may support many simultaneous TCP sockets where each socket is identified by its own 4-tuple.</p>
<h4 class="mume-header" id="33-connectionless-transport-udp">3.3 - Connectionless transport: UDP</h4>

<p><strong>UDP: User Datagram Protocol</strong></p>
<p>A &quot;best effort&quot; internet transport protocol. During transport, UDP segments may get lost or be delivered out of order. UDP is connection-less i.e. there is no handshake required between the sender and receiver, each UDP segment is handled independently of others.</p>
<p>A UDP segment header consists of:</p>
<ul>
<li>Source port number</li>
<li>Dest port number</li>
<li>Length (in bytes, includes header)</li>
<li>Checksum (error checking, optional)</li>
<li>Payload</li>
</ul>
<p>A UDP segment header is 8 bytes in size.</p>
<p><strong>Checksum</strong></p>
<p>Goal of checksum: To detect errors in transmitted segments</p>
<p>The sender:</p>
<ul>
<li>Treats segment contents as a sequence of 16-bit integers (including header fields)</li>
<li>Computes a checksum using addition of segment contents (1&apos;s complement sum)</li>
<li>Places the checksum value into UDP checksum field</li>
</ul>
<p>The receiver:</p>
<ul>
<li>Adds all the received content together as 16-bit integers</li>
<li>Adds the value computed to the checksum</li>
<li>If the result is not <code>1111 1111 1111 1111</code>, there are errors</li>
</ul>
<p><strong>UDP Applications</strong></p>
<p>Used where latency is sensitive/time critical</p>
<ul>
<li>Quick request/response (DNS, DHCP)</li>
<li>Network management (SNMP)</li>
<li>Routing updates (RIP)</li>
<li>Voice/video chat</li>
<li>Gaming (especially FPS)</li>
</ul>
<h4 class="mume-header" id="34-principles-of-reliable-data-transfer">3.4 - Principles of reliable data transfer</h4>

<p><strong>RDT 1.0</strong></p>
<p>For RDT 1.0, there is an underlying channel that is perfectly reliable, free of bit errors and no loss of packets. The transport layer does nothing.</p>
<p align="center">
<img src="https://lukakerr.github.io/assets/img/3331/rdt1.0.svg">
</p>
<p><strong>RDT 2.0 - Channel with bit errors</strong></p>
<p>The underlying channel may flip bits in packet. To recover from errors, we use:</p>
<ul>
<li>Acknowledgements (ACKs): Receiver explicitly tells sender that the packet was received OK</li>
<li>Negative Acknowledgements (NACKs): Receiver explicitly tells that the packet had errors, the sender retransmits upon receiving a NACK</li>
</ul>
<p align="center">
<img src="https://lukakerr.github.io/assets/img/3331/rdt2.0.svg">
</p>
<p>RDT 2.0 has <em>error detection</em>, <em>feedback</em> via ACKs/NACKs and <em>retransmission</em> unlike in RDT 1.0</p>
<p>If the ACK/NACK is <em>corrupted</em>, the sender doesn&apos;t know what happened at the receiver and thus can&apos;t retransmit</p>
<p><strong>RDT2.1</strong></p>
<ul>
<li>In RDT 2.1, the sender adds a sequence number to the packet, 2 are used throughout transmission (0 or 1).</li>
<li>The sender must also check if the NACKs/ACKs received are corrupted</li>
<li>The receiver also checks if the received packet is a duplicate using the seq number, if so: discard the duplicate.</li>
</ul>
<p align="center">
<img src="https://lukakerr.github.io/assets/img/3331/rdt2.1.svg">
</p>
<p>This example shows dotted line as erroneous whilst the solid is error-free in transmission. Erroneous lines return a NACK from receiver or a duplicate from sender</p>
<p><strong>RDT 2.2</strong></p>
<p>Same as RDT 2.1, using ACKs only. Instead of NACKs, receiver just sends ACK for the LAST packet which was was received OK, i.e. the receiver must explicitly include seq number of packet being ACKed. Retransmission of current packet whenever duplicate ACK at sender.</p>
<p align="center">
<img src="https://lukakerr.github.io/assets/img/3331/rdt2.2.svg">
</p>
<p><strong>RDT3.0 and performance</strong></p>
<p>In RDT 3.0, we assume that the underlying channel can also lose packets meaning that ACKs/data can be lost. Solution: The sender waits a reasonable amount of time for the receiver&apos;s ACKs, if none received, the sender retransmits the packet. If packet is just delayed, retransmission is a duplicate but the seq numbers handle this.</p>
<p align="center">
<img src="https://lukakerr.github.io/assets/img/3331/rdt3.0.svg">
</p>
<p>Performance isn&apos;t that good, using equation:</p>
<p align="center">
<img src="./pics/gBnEq.PNG">
</p>
<p><strong>Pipelined protocols - GBN, SR</strong></p>
<p>Pipelining allows the sender to send multiple yet &quot;to be ACKed&quot; packets. The range of seq numbers must be increased, there also must be buffering at the sender and/or receiver.</p>
<p>There are 2 types of generic forms of pipelined protocols: <strong>go-back-N</strong> and <strong>selective repeat</strong></p>
<p><em>Last packet</em> bit transmitted: t = L/R<br>
<em>ACK</em> arrives, send next packet: t = RTT + L/R</p>
<p>Utilization given below:</p>
<p align="center">
<img src="./pics/gBnEq.PNG">
</p>
<ul>
<li>N is the amount of packets sent</li>
<li>RTT is the round trip time</li>
<li>R is the bandwidth rate</li>
<li>L is the length</li>
</ul>
<p><strong>Go-back-N</strong>:</p>
<ul>
<li>Sender can have upto N unACKed packets in the pipeline</li>
<li>Sender has a single timer for the <strong>oldest</strong> unACKed packet, as timer expires -&gt; the sender will retransmit all unACKed packets</li>
<li>No buffer available at the receiver (out-of-order packets discarded)</li>
<li>Receiver only sends a cumulative ACK and doesn&apos;t ACK the new packet if there&apos;s a gap</li>
<li>Sender window size &lt; 2^n where n is number of bits in seq number space</li>
</ul>
<p align="center">
<img src="https://lukakerr.github.io/assets/img/3331/gbn.svg">
</p>
<p><strong>Selective Repeat</strong>:</p>
<ul>
<li>Sender can have up to N unACKed packets in the pipeline</li>
<li>Sender maintains a time for <strong>each</strong> unACKed packet, as the timer expires, the sender will retransmit only that unACKed packet</li>
<li>The receiver has a buffer and can accept out-of-order packets</li>
<li>The receiver sends an individual ACK for each packet</li>
<li>Sender window size &lt;= 1/2 of seq number space</li>
</ul>
<p align="center">
<img src="https://lukakerr.github.io/assets/img/3331/sr.svg">
</p>
<h4 class="mume-header" id="35-connection-oriented-transport-tcp">3.5 - Connection-oriented transport: TCP</h4>

<p><strong>TCP Overview</strong>:<br>
Properties:</p>
<ul>
<li>Point-to-point
<ul>
<li>1 sender, 1 receiver</li>
</ul>
</li>
<li>Reliable, in-order byte stream</li>
<li>Pipelined
<ul>
<li>TCP Congestion and flow control set window size</li>
</ul>
</li>
<li>Full duplex data
<ul>
<li>Bidirectional data flow in same connection</li>
</ul>
</li>
<li>Connection oriented
<ul>
<li>Handshaking initiates sender and receiver state before data exchange</li>
</ul>
</li>
<li>Flow Controlled
<ul>
<li>Sender will not overwhelm the receiver</li>
</ul>
</li>
</ul>
<p><strong>Segment structure</strong></p>
<p>The TCP segment header consists of:</p>
<ul>
<li>Source port number</li>
<li>Destination Port number</li>
<li>Sequence number (byte offsets)</li>
<li>ACK number</li>
<li>Receive window (bytes receiver willing to accept)</li>
<li>Header length</li>
<li>Checksum</li>
<li>Options</li>
<li>Data (variable length)</li>
</ul>
<p>A TCP segment header is 20 bytes in size compared to 8 bytes of a UDP segment. An entire TCP segment is less than the MSS - max segment size.</p>
<p><strong>TCP sequence numbers, ACKs</strong></p>
<ul>
<li>The Sequence number sent by sender is the 1st byte in the segment</li>
<li>The ACK sequence number is the next expected byte = seqNo. + Length(data)</li>
</ul>
<p align="center">
<img src="./pics/tcpSEQNo..PNG">
</p>
<p><em>Example</em>:</p>
<p align="center">
<img src="./pics/telnet.PNG">
</p>
<p>TCP <strong>Receivers</strong> send cumulative acknowledgements (like GBN)<br>
Consider a packet containing B bytes [X, X+1, X+2, &#x2026;.X+B-1]</p>
<ul>
<li>If all data prior to some seq no. X have already been received
<ul>
<li>ACK acknowledges X+B (next expected byte)</li>
<li>Seqno of next packet is same as last ACK field</li>
</ul>
</li>
</ul>
<p>Receivers can buffer out-of-sequence packets (like SR).</p>
<p>Consider Loss with cumulative ACKs:<br>
Sender sends packets -&gt; <em>100, 200, 300, 400, 500, 600, 700, 800, 900, &#x2026;</em></p>
<p>Assume the 5th packet (seq. no. 500) is lost but no others, the stream of ACKs would be: <em>200, 300, 400, 500, 500, 500, 500,&#x2026;</em></p>
<p><strong>TCP timeout</strong></p>
<p>Note:<br>
Sender maintains a single retransmission timer (like GBN) and<br>
retransmits on timeout.</p>
<p>We need to figure out a way to set TCP timeout value</p>
<ul>
<li>Needs to be longer than RTT but RTT varies</li>
<li>Too short = premature timeout causing unecessary retransmissions</li>
<li>Too long = Slow reaction, connection has lower throughput</li>
</ul>
<p>TimeoutInterval = EstimatedRTT + 4*DevRTT<br>
EstimatedRTT = (1 - &#x3B1;)*EstimatedRTT + &#x3B1;*SampleRTT<br>
Note:</p>
<ul>
<li>Typically &#x3B1;=0.125</li>
<li>DevRTT is the safety margin</li>
<li>SampleRTT is the measured time from segment transmission until ACK receipt</li>
</ul>
<p>DevRTT = (1&#x2212;&#x3B2;)*DevRTT+&#x3B2;* &#x2223; SampleRTT &#x2212; EstimatedRTT &#x2223;</p>
<p><strong>TCP fast retransmit</strong><br>
Time-out periods are often relatively long, Duplicate ACKs are a sign of an isolated loss. For e.g.<br>
A sender receives 3 duplicate ACKs for the same data, the sender resends an unACKed segment with smallest sequence number.</p>
<ul>
<li>Likely that unACKed segment is lost so we don&apos;t need to wait for timeout.</li>
</ul>
<p><strong>TCP Flow control</strong></p>
<p>Recall that hosts on either side of a TCP connection maintain a receive buffer for the connection, placing data in the receive buffer. This buffer may be busy at times and thus the sender can easily overflow the receive buffer by sending too much data too quickly.</p>
<p>TCP&apos;s flow-control service prevents this by having the sender maintain a receive window denoted as <em>rwnd</em>. It is used to give the sender an idea how much free buffer space is available at the receiver.</p>
<p>When rwnd = 0, sender stops sending data. (Sender keeps sending TCP segments with 1 data byte to receiver - dropped but ACKed by receiver)</p>
<p><strong>Connection management</strong></p>
<ol>
<li>A sends a SYN packet to tell B it wants to open a connection</li>
</ol>
<ul>
<li>Starts from some ISN</li>
</ul>
<ol start="2">
<li>B sends a SYN-ACK packet to tell A it accepts and is ready to receive the next byte</li>
</ol>
<ul>
<li>The SYN-ACK contains an ACK number with the value of A&#x2019;s ISN plus 1, and an ISN for B</li>
</ul>
<ol start="3">
<li>A sends an ACK packet to B to acknowledge B&#x2019;s SYN-ACK packet</li>
</ol>
<ul>
<li>The ACK contains an ACK number with the value of B&#x2019;s ISN plus 1, and a sequence number of A&#x2019;s ISN plus 1</li>
</ul>
<ol start="4">
<li>Data is sent between A and B</li>
<li>When finished, B sends a FIN packet to A</li>
<li>A sends an ACK packet to B with an ACK number of B&#x2019;s sequence number plus 1, and then a FIN packet to B</li>
<li>B sends an ACK packet to A with an ACK number of A&#x2019;s sequence number plus 1</li>
</ol>
<p align="center">
<img src="https://lukakerr.github.io/assets/img/3331/synack.svg">
</p>
<h4 class="mume-header" id="36-principles-of-congestion-control">3.6 - Principles of congestion control</h4>

<p><strong>Congestion</strong></p>
<h4 class="mume-header" id="37-tcp-congestion-control">3.7 - TCP Congestion control</h4>

<p><strong>TCP&apos;s approach:</strong></p>
<p><strong>TCP Slow start</strong></p>
<p><strong>AIMD</strong></p>
<p><strong>TCP Flavours</strong></p>
<p>Note: For exam, study till connection management (up-to page 73 in slides for Transport Layer)</p>
<p><strong>Sources</strong>:</p>
<ul>
<li>Kurose Computer Networking Textbook pages 223 -&gt; 302</li>
<li><a href="https://lukakerr.github.io/uni/3331-notes">https://lukakerr.github.io/uni/3331-notes</a></li>
<li><a href="https://webcms3.cse.unsw.edu.au/COMP3331/20T3/resources/52109">https://webcms3.cse.unsw.edu.au/COMP3331/20T3/resources/52109</a></li>
<li><a href="https://webcms3.cse.unsw.edu.au/COMP3331/20T3/resources/52095">https://webcms3.cse.unsw.edu.au/COMP3331/20T3/resources/52095</a></li>
</ul>
<p>Readings: Pages 223 - 302</p>

  </div>

</body></html>    
<!-- Week04 lecture notes-->
    <!-- Whenever we float, clear it-->
    <div class="clearfix"></div>
    <hr>
    <br>
<div class="footer">
  <div class="table">
    <ul id="horizontal-list">
      <li><a href="https://www.youtube.com/" class="fa fa-youtube"></a></li>
      <li><a href="https://www.reddit.com/r/cscareerquestions/" class="fa fa-reddit"></a></li>
      <li><a href="https://github.com/abdullah527382" class="fa fa-github"></a></li>
    </ul>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script>window.jQuery || document.write('<script src="../assets/js/vendor/jquery.slim.min.js"><\/script>')</script><script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
</html>